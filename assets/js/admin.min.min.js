jQuery(function($){const globalShipping=$(".global_shipping");const shippingwoo=$(".shipping_woo");const globalShippingTax=$(".global_shipping_tax");const globalShippingTaxRate=$(".global_shipping_tax_rate");const enableGooglePay=$(".enable_google_pay");const enableApplePay=$(".enable_apple_pay");const tokenApplePay=$(".apple_pay_identifier");const transactionType=$("#woocommerce_payplus-payment-gateway_transaction_type");const checkAmountAuthorization=$("#woocommerce_payplus-payment-gateway_check_amount_authorization");const blockIpTransactions=$("#woocommerce_payplus-payment-gateway_block_ip_transactions");const blockIpTransactionsHour=$("#woocommerce_payplus-payment-gateway_block_ip_transactions_hour");const changeVatInEliat=$("#woocommerce_payplus-payment-gateway_change_vat_in_eilat");const keywordsEilat=$("#woocommerce_payplus-payment-gateway_keywords_eilat");const deleteError=$(".payplus-delete-error");deleteError.click(function(event){event.preventDefault();$(this).closest("tr").remove()});if(!changeVatInEliat.prop("checked")){keywordsEilat.closest("tr").fadeOut()}changeVatInEliat.change(function(){if($(this).prop("checked")){keywordsEilat.closest("tr").fadeIn()}else{keywordsEilat.closest("tr").fadeOut()}});if(!blockIpTransactions.prop("checked")){blockIpTransactionsHour.closest("tr").fadeOut()}blockIpTransactions.change(function(){if(blockIpTransactions.prop("checked")){blockIpTransactionsHour.closest("tr").fadeIn()}else{blockIpTransactionsHour.closest("tr").fadeOut()}});if(transactionType.val()!=2){checkAmountAuthorization.closest("tr").fadeOut()}transactionType.change(function(){if($(this).val()==2){checkAmountAuthorization.closest("tr").fadeIn()}else{checkAmountAuthorization.closest("tr").fadeOut()}});if(enableApplePay&&enableApplePay.prop("checked")===false){tokenApplePay.parents("tr").fadeOut()}if(shippingwoo.prop("checked")){globalShipping.closest("tr").fadeOut();globalShippingTax.closest("tr").fadeOut();globalShippingTaxRate.closest("tr").fadeOut()}else{if(enableGooglePay.prop("checked")||enableApplePay.prop("checked")){globalShipping.attr("required","required");globalShippingTax.attr("required","required");globalShippingTaxRate.attr("required","required")}}if(shippingwoo&&!shippingwoo.prop("checked")&&globalShipping&&!globalShipping.val()){globalShipping.val(0)}shippingwoo.change(function(){const checked=$(this).prop("checked");if(!checked){globalShipping.closest("tr").fadeIn();globalShippingTax.closest("tr").fadeIn();globalShippingTaxRate.closest("tr").fadeIn();if(enableGooglePay.prop("checked")||enableApplePay.prop("checked")){globalShipping.attr("required","required");globalShippingTax.attr("required","required");globalShippingTaxRate.attr("required","required");if(globalShippingTax.val()=="none"){globalShippingTaxRate.closest("tr").fadeOut()}}}else{globalShipping.closest("tr").fadeOut();globalShippingTax.closest("tr").fadeOut();globalShippingTaxRate.closest("tr").fadeOut();globalShipping.removeAttr("required");globalShippingTax.removeAttr("required");globalShippingTaxRate.removeAttr("required")}});globalShippingTax.change(function(){let value=$(this).val();if(value=="none"){globalShippingTaxRate.find("option[value=0]").val("0");globalShippingTaxRate.parents("tr").fadeOut()}else{globalShippingTaxRate.find("option[value=0]").val("");globalShippingTaxRate.attr("required","required");globalShippingTaxRate.parents("tr").fadeIn()}});enableGooglePay.change(function(event){event.preventDefault();const slef=$(this);const checked=slef.prop("checked");const elementFieldset=enableGooglePay.parents("fieldset");$(".error-express-checkout").html("");if(checked){elementFieldset.find(".loading-express").fadeIn();$.ajax({type:"post",dataType:"json",url:payplus_script_admin.ajax_url,data:{action:"payplus-express-checkout-initialized",method:"google-pay"},success:function(response){elementFieldset.find(".loading-express").fadeOut();if(!response.status){elementFieldset.find(".error-express-checkout").html("<b>payplus error : </b>"+response.response_initialized.results.description);slef.prop("checked",false)}}})}});enableApplePay.change(function(){const checked=$(this).prop("checked");const elementFieldset=enableApplePay.parents("fieldset");const slef=$(this);$(".error-express-checkout").html("");if(checked){elementFieldset.find(".loading-express").fadeIn();$.ajax({type:"post",dataType:"json",url:payplus_script_admin.ajax_url,data:{action:"payplus-express-checkout-initialized",method:"apple-pay"},success:function(response){elementFieldset.find(".loading-express").fadeOut();if(!response.status){let description=response.response_initialized.results.description.description?response.response_initialized.results.description.description:response.response_initialized.results.description;elementFieldset.find(".error-express-checkout").html("<b> payplus error : </b>"+description);slef.prop("checked",false)}else{tokenApplePay.parents("tr").fadeIn();tokenApplePay.val(response.response_initialized.apple_pay_identifier)}}})}else{tokenApplePay.parents("tr").fadeOut()}});$("#woocommerce_payplus-payment-gateway_transaction_type").change(function(){let value=$(this).val();if(value==2){$("#woocommerce_payplus-payment-gateway_check_amount_authorization").prop("disabled",false)}else{$("#woocommerce_payplus-payment-gateway_check_amount_authorization").prop("disabled",true)}});if($("#chargeByItems").is(":checked"))$("#totalorder").show();else $("#totalorder").hide();if($("div#payplus-options").length){toggle_iframe_height();toggle_foreign_invoice();toggle_invoice_options();$(document).on("change","select#woocommerce_payplus-payment-gateway_display_mode",function(){toggle_iframe_height()});$(document).on("change","select#woocommerce_payplus-payment-gateway_paying_vat",function(){toggle_foreign_invoice()});$(document).on("change","select#woocommerce_payplus-payment-gateway_initial_invoice",function(){toggle_invoice_options();toggle_foreign_invoice()});function toggle_iframe_height(){var display_mode=$("select#woocommerce_payplus-payment-gateway_display_mode").val();if(display_mode=="redirect"){$("input#woocommerce_payplus-payment-gateway_iframe_height").closest("tr").hide();$("input#woocommerce_payplus-payment-gateway_import_applepay_script").closest("tr").hide()}else{$("input#woocommerce_payplus-payment-gateway_iframe_height").closest("tr").show();$("input#woocommerce_payplus-payment-gateway_import_applepay_script").closest("tr").show()}}function toggle_foreign_invoice(){var invoice_option=$("select#woocommerce_payplus-payment-gateway_paying_vat").val();if(invoice_option=="2"){$("input#woocommerce_payplus-payment-gateway_paying_vat_iso_code").closest("tr").show();$("input#woocommerce_payplus-payment-gateway_foreign_invoices_lang").closest("tr").show()}else{$("input#woocommerce_payplus-payment-gateway_paying_vat_iso_code").closest("tr").hide();$("input#woocommerce_payplus-payment-gateway_foreign_invoices_lang").closest("tr").hide()}}function toggle_invoice_options(){var initial_invoice=$("select#woocommerce_payplus-payment-gateway_initial_invoice").val();if(initial_invoice=="1"){$("select#woocommerce_payplus-payment-gateway_paying_vat").closest("tr").show();$("input#woocommerce_payplus-payment-gateway_paying_vat_iso_code").closest("tr").show();$("input#woocommerce_payplus-payment-gateway_foreign_invoices_lang").closest("tr").show()}else{$("select#woocommerce_payplus-payment-gateway_paying_vat").closest("tr").hide();$("input#woocommerce_payplus-payment-gateway_paying_vat_iso_code").closest("tr").hide();$("input#woocommerce_payplus-payment-gateway_foreign_invoices_lang").closest("tr").hide()}}}});